{% extends "base.html" %}

{% block title %}Add Student Data{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2><i class="fas fa-plus"></i> Add Student Data</h2>
        <p class="lead">Add sample student data for testing the application functionality.</p>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-user-plus"></i> Student Information Form</h5>
            </div>
            <div class="card-body">
                <form method="POST" id="studentForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="htno" class="form-label">HTNO:</label>
                                <input type="text" class="form-control" id="htno" name="htno" 
                                       placeholder="e.g., 21A91A0501" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="name" class="form-label">Student Name:</label>
                                <input type="text" class="form-control" id="name" name="name" 
                                       placeholder="Enter student name" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="branch" class="form-label">Branch:</label>
                                <select class="form-control" id="branch" name="branch" required>
                                    <option value="">Select Branch</option>
                                    <option value="CSE">Computer Science Engineering</option>
                                    <option value="ECE">Electronics & Communication</option>
                                    <option value="EEE">Electrical & Electronics</option>
                                    <option value="MECH">Mechanical Engineering</option>
                                    <option value="CIVIL">Civil Engineering</option>
                                    <option value="IT">Information Technology</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="year" class="form-label">Year:</label>
                                <select class="form-control" id="year" name="year" required>
                                    <option value="">Select Year</option>
                                    <option value="1">First Year</option>
                                    <option value="2">Second Year</option>
                                    <option value="3">Third Year</option>
                                    <option value="4">Fourth Year</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="semester" class="form-label">Semester:</label>
                                <select class="form-control" id="semester" name="semester" required>
                                    <option value="">Select Semester</option>
                                    <option value="1">Semester 1</option>
                                    <option value="2">Semester 2</option>
                                    <option value="3">Semester 3</option>
                                    <option value="4">Semester 4</option>
                                    <option value="5">Semester 5</option>
                                    <option value="6">Semester 6</option>
                                    <option value="7">Semester 7</option>
                                    <option value="8">Semester 8</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="subject_count" class="form-label">Number of Subjects:</label>
                                <input type="number" class="form-control" id="subject_count" 
                                       min="1" max="10" value="6" onchange="generateSubjectFields()">
                            </div>
                        </div>
                    </div>

                    <hr>
                    <h5><i class="fas fa-book"></i> Subject Details</h5>
                    <div id="subjects_container">
                        <!-- Subject fields will be generated here -->
                    </div>

                    <div class="mt-4">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> Add Student
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="fillSampleData()">
                            <i class="fas fa-magic"></i> Fill Sample Data
                        </button>
                        <button type="button" class="btn btn-warning" onclick="addMultipleStudents()">
                            <i class="fas fa-users"></i> Add Multiple Students
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="alert alert-info">
            <h5><i class="fas fa-info-circle"></i> Grade Scale:</h5>
            <div class="row">
                <div class="col-md-6">
                    <strong>Grades:</strong> O (Outstanding - 10), A+ (Excellent - 9), A (Very Good - 8), B+ (Good - 7), B (Above Average - 6)
                </div>
                <div class="col-md-6">
                    <strong>Others:</strong> C (Average - 5), P (Pass - 4), F (Fail - 0), Ab (Absent - 0)
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function generateSubjectFields() {
    const count = document.getElementById('subject_count').value;
    const container = document.getElementById('subjects_container');
    container.innerHTML = '';
    
    for (let i = 0; i < count; i++) {
        const subjectDiv = document.createElement('div');
        subjectDiv.className = 'row mb-3';
        subjectDiv.innerHTML = `
            <div class="col-md-3">
                <label class="form-label">Subject Code:</label>
                <input type="text" class="form-control" name="subject_code_${i}" 
                       placeholder="e.g., CS101" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Subject Name:</label>
                <input type="text" class="form-control" name="subject_name_${i}" 
                       placeholder="e.g., Programming in C" required>
            </div>
            <div class="col-md-2">
                <label class="form-label">Credits:</label>
                <input type="number" class="form-control" name="credits_${i}" 
                       min="1" max="6" value="3" required>
            </div>
            <div class="col-md-3">
                <label class="form-label">Grade:</label>
                <select class="form-control" name="grade_${i}" required>
                    <option value="">Select Grade</option>
                    <option value="O">O (Outstanding)</option>
                    <option value="A+">A+ (Excellent)</option>
                    <option value="A">A (Very Good)</option>
                    <option value="B+">B+ (Good)</option>
                    <option value="B">B (Above Average)</option>
                    <option value="C">C (Average)</option>
                    <option value="P">P (Pass)</option>
                    <option value="F">F (Fail)</option>
                    <option value="Ab">Ab (Absent)</option>
                </select>
            </div>
        `;
        container.appendChild(subjectDiv);
    }
}

function fillSampleData() {
    document.getElementById('htno').value = '21A91A0501';
    document.getElementById('name').value = 'John Doe';
    document.getElementById('branch').value = 'CSE';
    document.getElementById('year').value = '2';
    document.getElementById('semester').value = '3';
    
    // Generate sample subject data
    const subjects = [
        {code: 'CS201', name: 'Data Structures', credits: 4, grade: 'A'},
        {code: 'CS202', name: 'Computer Organization', credits: 3, grade: 'B+'},
        {code: 'CS203', name: 'Database Management', credits: 4, grade: 'A+'},
        {code: 'MA201', name: 'Discrete Mathematics', credits: 3, grade: 'B'},
        {code: 'EN201', name: 'Technical English', credits: 2, grade: 'A'},
        {code: 'CS204', name: 'Software Engineering', credits: 3, grade: 'O'}
    ];
    
    document.getElementById('subject_count').value = subjects.length;
    generateSubjectFields();
    
    subjects.forEach((subject, index) => {
        document.querySelector(`input[name="subject_code_${index}"]`).value = subject.code;
        document.querySelector(`input[name="subject_name_${index}"]`).value = subject.name;
        document.querySelector(`input[name="credits_${index}"]`).value = subject.credits;
        document.querySelector(`select[name="grade_${index}"]`).value = subject.grade;
    });
}

function addMultipleStudents() {
    if (confirm('This will add 10 sample students. Continue?')) {
        // This would typically call an endpoint to add multiple students
        alert('Feature to add multiple students would be implemented here');
    }
}

// Initialize with default subject fields
window.onload = function() {
    generateSubjectFields();
}
</script>
{% endblock %}
